import{useLayoutEffect as v}from"react";import{E as B}from"./actions.cc773d39.js";import{y as F}from"./usePredefinedStakes.892527de.js";import{e as p}from"./component.338ef72c.js";import{c as f,bG as E,bH as g}from"./index.2e7649fa.js";import"./index.9a33d21b.js";import"./backend-status-codes.4c1943df.js";import"./i18next.083d61f0.js";import{u as I}from"./useEventbus.6393d2bd.js";const S=t=>{let s=!1;return[t.map(e=>(!s&&e.isLive&&(s=e.isLive),{Coeficient:Number(e.coeficient),SelectionId:e.eventId})),s]},L=({events:t,isLive:s,type:i,callback:e})=>new Promise(a=>{F({Events:t,IsLive:s,Type:i},n=>{if(!n.result&&n.details.length>0){const o=n.details.reduce((r,l)=>l.amount?[...r,{label:l.amount,value:l.id,maxPayouts:l.freebet_max_payouts}]:r,[]);a(o),e==null||e(n.details)}a([])},()=>{a([])})}),m=()=>{var n;const t=(n=f.getState())==null?void 0:n.betSlip,s=t.allLsBets,i=t.freeBets,e={},a=s.reduce((o,r)=>{if(i.singleEventFreeBets[r.eventId])return o;const[l,d]=S([r]),u=L({events:l,isLive:d,callback:c=>p(c,r.eventId)});return u.then(c=>{e[r.eventId]=c}),[...o,u]},[]);i.selectedFreeBetEventId&&!s.find(o=>o.eventId===i.selectedFreeBetEventId)&&f.dispatch(E({selectedFreeBetEventId:null})),Promise.all(a).finally(()=>{f.dispatch(g(e))})},w=({getOnMount:t=!1})=>(v(()=>{t&&m()},[]),I({[B.GET_FREE_BETS]:m}),null);export{w as F,S as b,L as f};
