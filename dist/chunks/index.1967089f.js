var x=Object.defineProperty,M=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var w=(e,n,r)=>n in e?x(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,H=(e,n)=>{for(var r in n||(n={}))j.call(n,r)&&w(e,r,n[r]);if(m)for(var r of m(n))B.call(n,r)&&w(e,r,n[r]);return e},R=(e,n)=>M(e,S(n));import{j as A}from"./index.053dea56.js";import{useRef as I,useState as D,useEffect as T,Fragment as y}from"react";const z=10,F=20,G=2.5,P=3,k=({data:e,renderer:n,initialCount:r=z,loadCount:t=F,container:O=y,containerProps:U={},customViewport:L,scrollMult:Y=G,collapsedCount:_})=>{const c=I(r),u=I(null),[p,g]=D((e!=null?e:[]).slice(0,c.current));return T(()=>{c.current=r},[r,t,e==null?void 0:e.length]),T(()=>{e&&g(e.slice(0,c.current));let l=0,i=0;const s=L||window,v=s.clientHeight*Y,E=()=>{var f,h;i=s.pageYOffset||s.scrollTop;const o=(f=u.current)==null?void 0:f.closest('[class*="ModuleWidgets"]');l<i&&c.current<=((h=e==null?void 0:e.length)!=null?h:0)&&(!L&&o&&(o==null?void 0:o.getBoundingClientRect().height)<=(window.innerHeight+window.scrollY)*2||!o&&document.documentElement.scrollHeight-window.scrollY<=window.innerHeight*P||L&&s.scrollHeight-s.scrollTop<=v)&&(e&&g(N=>[...N,...e.slice(c.current,c.current+t)]),c.current+=t),l=i};return s.addEventListener("scroll",E,{passive:!0}),()=>{s.removeEventListener("scroll",E)}},[r,t,e,L]),T(()=>{var l;_&&_>1&&_<((l=e==null?void 0:e.length)!=null?l:0)&&e&&(g(i=>[...i,...e.slice(c.current,c.current+1)]),c.current+=1)},[_]),A.jsx("div",{className:"lazyLoad__wrapper",ref:u,children:A.jsx(O,R(H({},U),{children:p.map(n)}))})};export{k as L};
