var z=Object.defineProperty,Q=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var R=(e,t,n)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,A=(e,t)=>{for(var n in t||(t={}))Y.call(t,n)&&R(e,n,t[n]);if(y)for(var n of y(t))$.call(t,n)&&R(e,n,t[n]);return e},I=(e,t)=>Q(e,q(t));import{i as M,j as h,S as H,K as w,G as J}from"./index.053dea56.js";import{Suspense as X,useRef as U,useLayoutEffect as E,memo as Z,useEffect as ee}from"react";import{_ as te}from"./i18next.083d61f0.js";import{l as se}from"./lazy.73833dcd.js";import{k as x,p as F,c as ne,aw as oe,u as W,D as ae}from"./index.59a19261.js";import{u as l}from"./index.ffa75b49.js";import{b9 as O,bz as j,bA as b,bB as k,bC as le,bD as D,bE as S,am as re,ah as ce}from"./index.c0392060.js";import{a as ie}from"./usePredefinedStakes.58f7290f.js";import"./backend-status-codes.80bfe624.js";import{u as P}from"./useDispatch.cd750ed9.js";import{g as ue}from"./getAdvancedMultipleGeneralField.a271e2a8.js";import{g as de}from"./socket.c077606d.js";import"react-dom";import"./user-data.f480309c.js";import"./swarm-command-names.230156ba.js";import"./odds.334494eb.js";import"./batch.dcd71b53.js";const{AdvancedTotalOddsComponent:pe}=se(()=>te(()=>import("./component.a0a5fd9e.js"),["chunks/component.a0a5fd9e.js","chunks/index.053dea56.js","chunks/index.c0392060.js","chunks/backend-status-codes.80bfe624.js","chunks/i18next.083d61f0.js","chunks/swarm-command-names.230156ba.js","chunks/index.7fdd3c1e.js","chunks/Skeleton.d4e88166.js","chunks/toConsumableArray.19249869.js","chunks/placements.f27399b1.js","chunks/index.9a56940c.js","chunks/index.fbd937ed.js","chunks/create-test-id.17a0abc8.js","chunks/wrapper-row-z-index.6fe5ad22.js","chunks/app-data.da3833f4.js","chunks/create-fake-array.68114bc4.js","chunks/index.ffa75b49.js","chunks/index.59a19261.js","chunks/user-data.f480309c.js","chunks/useTranslation.70287e96.js","chunks/context.f61a2be2.js","chunks/useDispatch.cd750ed9.js","chunks/socket.c077606d.js"])),fe=()=>{const e=l(x).length;return M()&&e>1?h.jsx(X,{children:h.jsx(pe,{})}):null},ge=9;let u=null;const he=()=>{const e=P(),t=l(x),n=l(F),o=l(ne),f=l(oe),C=l(W),d=U(0),v=ie(t),s=U(null);return E(()=>{const r=URL.createObjectURL(new Blob([`importScripts( "${H.CALCULATE_POSSIBLE_WIN_WORKER_URL}" );`],{type:"text/javascript"}));return u=new Worker(r),URL.revokeObjectURL(r),()=>{u==null||u.terminate(),u=null}},[]),E(()=>{const r=[],m=[],p=[],i=[];if(t.forEach(a=>{p.push(a.eventId),r.push(a.coeficient)}),(v||[]).forEach(a=>{i.push(a.eventId),m.push(a.coeficient)}),!O(r,m)){e(j());return}O(p,i)||e(j())},[t]),E(()=>{t.length===1&&(e(b(0)),e(k(0)))},[f]),E(()=>{if(!t.length)return;const r=t.reduce((c,T)=>T.coeficient?parseFloat(T.coeficient.toString())+c:c,0);e(le(r));const m=[...n],p=t.map(({coeficient:c})=>c),i=(v||[]).map(({coeficient:c})=>c),a=p.length===i.length&&!O(p,i),L=t.filter(({isSuspended:c})=>!c).length;if(u){L>ge&&!a&&e(D(!0)),e(S(!0)),d.current++;const c=d.current,T=N=>{if(c!==d.current)return;const{data:B,type:V}=N.data;if(V==="final"){if(B.length){const G=B.findIndex(g=>g.count===t.length&&!g.strongCount&&g.type!==1);let _=[...B];_.push(_.splice(G,1)[0]),M()&&o&&C===w.QUICKBET&&(re({id:J,stake:""}),e(b(0)),e(k(0)),_=[..._].map((g,K)=>(K!==_.length-1&&(g=I(A({},g),{stake:""})),g))),e(ce(_))}e(S(!1)),e(D(!1))}};return s.current&&u.removeEventListener("message",s.current),s.current=T,u.addEventListener("message",T),u.postMessage({betTypesConfData:m,allLsBets:t,singleTotal:r}),()=>{e(S(!1))}}},[f,C]),null},me=()=>h.jsx(he,{}),De=Z(()=>{const e=P(),t=l(F),n=l(ae),o=l(de),f=l(x).length,C=l(W);return ee(()=>{let d=0,v=0;t.map((s,r)=>{var p;const m=C===w.QUICKBET?ue(s):!0;if((s.count<=f&&!s.strongCount||s.count===f&&s.strongCount)&&m){const i=s.stake.length?parseFloat(s.stake):0;let a=s.stake.length?parseFloat(s.stake):"";if(s.count===1&&!s.stake)d+=n*i;else{const L=s.each_way?s.posWin+s.ewPosWin||0:s.posWin;o!=null&&o.max_odd_for_multiple_bet&&L>(o==null?void 0:o.max_odd_for_multiple_bet)?d+=((p=o==null?void 0:o.max_odd_for_multiple_bet)!=null?p:1)*i:d+=L*i}r>0&&(typeof a=="number"&&(s.each_way&&(a*=2),v+=a*s.combCount),e(b(v)),e(k(d)))}}),f||(e(b(0)),e(k(0)))},[t,f,C]),h.jsxs(h.Fragment,{children:[h.jsx(me,{}),h.jsx(fe,{})]})});export{De as AdvancedBetslipLayoutComponent};
