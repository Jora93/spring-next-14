var ae=Object.defineProperty,oe=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var $=(e,t,a)=>t in e?ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,v=(e,t)=>{for(var a in t||(t={}))L.call(t,a)&&$(e,a,t[a]);if(R)for(var a of R(t))H.call(t,a)&&$(e,a,t[a]);return e},E=(e,t)=>oe(e,ie(t));var T=(e,t)=>{var a={};for(var o in e)L.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(e!=null&&R)for(var o of R(e))t.indexOf(o)<0&&H.call(e,o)&&(a[o]=e[o]);return a};import{_ as ne}from"./i18next.083d61f0.js";import{u as le,I as me,j as n,S as pe,i as b,ad as ce}from"./index.9a33d21b.js";import{useMemo as B,useCallback as K,memo as Q,useState as de,useEffect as V,Suspense as ue}from"react";import{c as x}from"./index.fbd937ed.js";import{s as P}from"./array-sort-by.690dd174.js";import{G as Y,E as w,S as q}from"./app-data.3313f084.js";import{l as ge}from"./lazy.73833dcd.js";import{R as U}from"./index.2e7649fa.js";import{E as X}from"./not-real-sports.64fc4139.js";import{e as Z,u as ee}from"./get-data-level.0ccc74a6.js";import{P as he,p as D,s as fe,r as _e,c as ve}from"./data-fields.c78d776a.js";import{c as be}from"./create-where-object.298dd3bb.js";import{g as Ce,s as je}from"./route-manipulation.7a3d02e7.js";import{a as ye}from"./addStreamInfoToGame.83901e46.js";import{C as te}from"./MarketListOnlyESportSkeleton.dc4bd09d.js";import{M as Ae}from"./index.625ed26a.js";import{u as F}from"./useSearchParams.353231ec.js";import{u as z}from"./useSbRouteMatch.ecfb9430.js";import{i as Se,y as Oe,z as se,b as Ee}from"./sport-data.58080bc0.js";import{f as Ne,h as ke,d as xe,e as J}from"./Skeleton.e7ccd4f0.js";import{u as W}from"./useDispatch.151d3a82.js";import{u as C}from"./index.17630e7e.js";import{C as G}from"./index.9fa2e41e.js";import{EventCollapse as M}from"./index.cb829a96.js";import{h as Pe,R as Re}from"./index.0a152e8c.js";import{s as we}from"./useSortFavoriteSportsOrdering.8c105f2d.js";import{h as Ie,i as Te}from"./fav-data.eb686620.js";import{g as De}from"./new-sportsbook.6886dfa1.js";import{u as Ge}from"./useTranslation.70287e96.js";const Me=({competitionData:e,sportData:t})=>{var N;const{path:a,params:o}=z(),{type:l}=F(),g=le(),h=W(),c=(N=C(Ne))==null?void 0:N[`${l}${t.sportAlias}`],f=C(Se),u=B(()=>{const d=c?P(Object.values(c),"start_ts").filter(s=>{var r;return(r=e==null?void 0:e.game)==null?void 0:r[s.id]}):null;if(d&&f)return ye(d,f)},[c,e,f]),S=K((d,s)=>{var p;h(Oe({id:s.toString(),top:((p=d.currentTarget.parentElement)==null?void 0:p.getBoundingClientRect().top)||0}));const r={};o.competition&&(r.competition=o.competition),o.region&&(r.region=o.region);const i={type:l};g.push({pathname:`${Ce(a)}${je(E(v({},r),{sport:o.sport,game:`${s}`}))}`,search:me.stringify(i)})},[o,l,a]);return u?n.jsx(n.Fragment,{children:u.map(d=>n.jsx(Ae,{game:d,currentSport:t.sportAlias,competitionName:e.name,sportName:t.sportName,onClick:s=>S(s,d.id),configs:{category:"esport"},longDate:!0,regionAlias:e.region},d.id))}):n.jsx(te,{})},re=(e,t)=>({live:{type:1},prematch:v(v({},he),t?{start_ts:t}:{}),all:v({"@or":[{type:{"@in":[0,1,2]}},{visible_in_prematch:1}]},t?{start_ts:t}:{})})[e],Be=Q(({sport:e,withPadding:t})=>{const a=C(se),o=C(Ee),{params:{sport:l}}=z(),g=W(),{type:h}=F(),[c,f]=de({}),u=h==="prematch"&&l==="AllESports",S=K(s=>{s!=null&&s.game&&g(ke({data:{[`${h}${e.alias}`]:s.game}}))},[h,e.alias]);V(()=>{if((!e.alias||!h)&&!pe.MOCKED_DATA)return;const s=U.gForSubscribe("esportGamesByCompetition"),r={display_key:"WINNER"},i=E(v({},be({isESport:!0,currentQueryObj:{alias:e.alias}})),{game:re(h,o),market:r}),p={event:D.event,market:[...D.market,"group_id","group_name"],game:[[...D.game[0],"type","info","text_info","sport_alias"]]};return Z(s,p,i,S,!0,S),()=>{ee(s)}},[e.alias,h,o]);const N=B(()=>{const s=r=>Object.values(r.competition||{}).map(i=>{var p;return i.region=r.alias,i.orderByStart=i.game&&((p=Object.values(i.game))==null?void 0:p[0].start_ts),i});if(u){const r=[];return Object.values(e.region||{}).map(i=>s(i)).flat(1).map(i=>{Object.values(i.game||{}).map(p=>{r.push({id:p.id,name:i.name,start_ts:p.start_ts,order:i.order,region:i.region,sportAlias:i.sportAlias,orderByStart:i.orderByStart,game:{[p.id]:p}})})}),P(r,"start_ts")}else return P(Object.values(e.region||{})).map(r=>P(s(r),"orderByStart")).flat(1)},[e.region,u]),d={wrapper:x(["v3-event-collapse",{"v3-event-collapse__esportPrematchAll":u,"v3-event-collapse__esportPrematchAll--mobile":b()&&h==="prematch"}]),header:x([{"v3-event-collapse__header--esport":u}])};return n.jsx("div",{style:{padding:t&&!u?"4px 4px 2px":h==="live"&&b()?"4px":"0"},className:x(["competitionsBySportWrapper",{esport__dropdownContainer:!u,"esport__dropdownContainer--mobile":!u&&b(),esport__not__allSports:l!==X.AllESports}]),children:N.map((s,r)=>n.jsx(G,{condition:!u,wrapper:i=>{var p,k;return n.jsx(M,{title:s.name,defaultActive:(k=c[s.id])!=null?k:r===0||!!((p=s==null?void 0:s.game)!=null&&p[(a==null?void 0:a.id)||""]),onChange:m=>{f(_=>E(v({},_),{[s.id]:m}))},icon:n.jsx(Y,{name:s.region,lib:"flags",size:w._24}),wrapperClassName:d.wrapper,headerClassName:d.header,children:i},r)},children:n.jsx(Me,{competitionData:s,sportData:{sportAlias:e.alias,sportName:e.name}},r)},s.id))})},(l,h)=>{var g=l,{children:e}=g,t=T(g,["children"]);var c=h,{children:a}=c,o=T(c,["children"]);return JSON.stringify(t)===JSON.stringify(o)}),Fe=(e,t,a,o)=>{const l={sport:fe.sport,region:_e.region,competition:ve.competition,game:["id","start_ts"]},g={sport:{type:0},game:re(a,o)};Z(e,l,g,t,!0,t)},{NoItem:ze}=ge(()=>ne(()=>import("./index.0a152e8c.js").then(e=>e.a4),["chunks/index.0a152e8c.js","chunks/i18next.083d61f0.js","chunks/index.9a33d21b.js","chunks/swarm-command-names.afa48e3f.js","chunks/generic.cf030613.js","chunks/route-manipulation.7a3d02e7.js","chunks/index.2e7649fa.js","chunks/backend-status-codes.4c1943df.js","chunks/not-real-sports.64fc4139.js","chunks/lazy.73833dcd.js","chunks/get-data-level.0ccc74a6.js","chunks/useSportsbookConfigs.7961e643.js","chunks/index.fbd937ed.js","chunks/app-data.3313f084.js","chunks/create-test-id.17a0abc8.js","chunks/create-fake-array.68114bc4.js","chunks/index.17630e7e.js","chunks/data-fields.c78d776a.js","chunks/array-sort-by.690dd174.js","chunks/game-data.f991b97b.js","chunks/tour.8bae694e.js","chunks/index.9c369ab9.js","chunks/styled-components.browser.esm.04179a03.js","chunks/toConsumableArray.635ccf3f.js","chunks/placements.2094afc0.js","chunks/index.7d5f88f7.js","chunks/useOpenLoginPopup.9bf6877c.js","chunks/custom-categories.700b2888.js","chunks/index.1dfc2dcd.js","chunks/useSearchParams.353231ec.js","chunks/fav-data.eb686620.js","chunks/user-data.358c1cdc.js","chunks/useDispatch.151d3a82.js","chunks/index.9fa2e41e.js","chunks/useTranslation.70287e96.js","chunks/context.f61a2be2.js","chunks/index.9e499441.js","chunks/index.29e6371b.js","chunks/EmptyOddGroup.91184c82.js","chunks/EmptyOdd.1f8b4e8f.js","chunks/usePredefinedStakes.892527de.js","chunks/odds.3bca0cb7.js","chunks/socket.c1bf8301.js","chunks/batch.dcd71b53.js","chunks/calculate-boosted-odds.8854e450.js","chunks/useOddChange.efac89df.js","chunks/index.9eebc582.js","chunks/index.5f1e48b3.js","chunks/useDoBet.55e9cf8f.js","chunks/editBetActions.4f0fb51e.js","chunks/edit-bet.f841d32c.js","chunks/getAdvancedMultipleGeneralField.2fa28824.js","chunks/counterOffer.74a34af9.js","chunks/useEventbus.6393d2bd.js","chunks/sport-data.58080bc0.js","chunks/index.27fc0452.js","chunks/useSbRouteMatch.ecfb9430.js","chunks/index.3dbf2b2e.js","chunks/index.f4c7d5fb.js","chunks/new-sportsbook.6886dfa1.js","chunks/index.a12ad9da.js","chunks/Skeleton.e7ccd4f0.js","chunks/game-current-state.dbd76719.js","chunks/sport-list.d0c83c34.js","chunks/live-games-helper.ab98b608.js","chunks/col.94909042.js","chunks/index.9011aacc.js","chunks/index.f24e8077.js","chunks/index.fcc8b535.js","chunks/useMounted.6d9c5610.js","chunks/rtl.d50a3051.js","chunks/index.c7348bcc.js","chunks/api-post-message-sender.98c07ac7.js","chunks/match-tracker-sports.bb8d5033.js","chunks/Skeleton.da8e5d7a.js","chunks/handleRedirectToSportsBook.1fa97cf0.js","chunks/index.cd749fad.js","chunks/index.3dc509b3.js","chunks/get-tournament-time.5f47a243.js","chunks/sportsbook.2cb562a0.js","chunks/index.cb829a96.js","chunks/index.b40f854c.js","chunks/new-sportsbook.1752e123.js","chunks/index.184af16c.js","chunks/useCalculateBetslipFixedSwitchersHeight.8651a87e.js","chunks/index.b85c00ef.js","chunks/global-variables.eb46f49b.js","chunks/index.625ed26a.js","chunks/index.3536b24d.js","chunks/hide-private-competitions.bb3e889f.js","chunks/private-competitions.91107fbb.js","chunks/dropdown.29a72cea.js","chunks/EllipsisOutlined.53bf0b36.js","chunks/KeyCode.6413d982.js","chunks/index.aa1549be.js","chunks/index.c5ad8069.js","chunks/index.08cf9b6f.js","chunks/Overflow.554112a5.js","chunks/FavoriteButtonGame.520918c4.js","chunks/index.d4b2e2e7.js","chunks/index.856ed0f4.js","chunks/spec-elems.a06c4bcb.js","chunks/useSortFavoriteSportsOrdering.8c105f2d.js","chunks/index.44f69af2.js","chunks/useUpdateEffect.ee726e5b.js","chunks/index.6cdb25e4.js","chunks/index.7a2bd44d.js","chunks/style.b04602fb.js","chunks/index.3089aa99.js","chunks/index.6eb22f1b.js","chunks/useSportsFavoriteClickHandler.d437d18b.js","chunks/index.e5947b84.js","chunks/useBoostedOdds.fba5ecbe.js","chunks/useContentHeight.06461539.js","chunks/jackpot.6ac13427.js","chunks/index.9e446389.js","chunks/index.a1fbe297.js","chunks/index.f57a2e81.js"])),We=8,$e=4,bt=Q(({externalSport:e})=>{const{t}=Ge(),a=W(),{params:{sport:o}}=z(),l=C(De),{type:g}=F(),h=C(Ie).sportsWithCompetitions,c=ce(),f=C(xe),u=C(se),S=C(Te),d=((e==null?void 0:e.alias)||(l==null?void 0:l.alias)||o)===X.AllESports,s=g==="prematch"&&d,r=B(()=>{const m=(e==null?void 0:e.id)||(l==null?void 0:l.id);let _;if(f&&m!==void 0&&(_=d?f:f[m]?{[m]:f[m]}:void 0),!c.competition&&!c.region||c.competition==="all"&&c.region==="all")return _;{let y={};return _&&Object.values(_).find(O=>{const j=O.region&&Object.values(O.region).find(I=>String(I.alias)===c.region);let A;if(j&&(A=j.competition&&Object.values(j.competition).find(I=>String(I.id)===c.competition)),j&&A)return y={[O.id]:E(v({},O),{region:{[j.id]:E(v({},j),{competition:{[A.id]:A}})}})},!0}),y}},[f,l,e,c.competition,c.region]);if(V(()=>{const m=U.gForSubscribe("esportSports");return e&&!r&&Fe(m,y=>{Object.keys(y.sport).length?a(J(y.sport)):a(J(void 0))},g),()=>{e&&!r&&ee(m)}},[r,e]),f===void 0)return null;if((l==null?void 0:l.alias)==="favourites")return h?n.jsx(Pe,{}):n.jsx(ue,{fallback:n.jsx(Re,{}),children:n.jsx(ze,{title:t("sportsbook.noGame"),text:t("sportsbook.emptyFavoriteMarkets"),size:"medium"})});const i={wrapper:x(["v3-event-collapse esport__collapse__container",{"v3-event-collapse__esportPrematchAll":s,"v3-event-collapse__esportPrematchAll--mobile":b()&&g==="prematch"}]),header:x([{"v3-event-collapse__header--esport":s}])},p=we(S,r?P(Object.values(r))||[]:[],"id"),k=b()?"esport__competitions__container--mobile":"esport__competitions__container";return r&&p?n.jsx("div",{className:k,children:p.map((m,_)=>n.jsx(G,{condition:Object.keys(r).length>1,wrapper:y=>{const O=_===0||m.competition&&Object.values(m.competition).some(j=>{var A;return(A=j.game)==null?void 0:A[(u==null?void 0:u.id)||""]});return n.jsx(M,{title:m.name,defaultActive:O,size:b()?"default":"middle",icon:n.jsx(Y,{name:m.alias,lib:"sports",size:w._24}),headerClassName:i.header,wrapperClassName:i.wrapper,children:y},m.id)},children:n.jsx(Be,{sport:m,withPadding:Object.keys(r).length>1})},m.id))}):n.jsx(G,{condition:d&&g==="live",wrapper:m=>n.jsx("div",{className:k,children:n.jsx(M,{title:n.jsx(q.Input,{active:!0,style:{width:70,maxWidth:70,height:14,borderRadius:4}}),defaultActive:!0,size:b()?"default":"middle",icon:n.jsx(q.Avatar,{active:!0,style:{width:w._24,height:w._24}}),headerClassName:i.header,wrapperClassName:i.wrapper,children:n.jsx("div",{style:{padding:b()?$e:We,backgroundColor:b()?"var(--v3-black-6)":"var(--v3-black-2)"},children:m})})}),children:n.jsx(te,{withTitle:!0,withFlag:!d&&g==="live"})})});export{bt as C,Fe as g};
