var Q=Object.defineProperty,W=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var j=(r,o,e)=>o in r?Q(r,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[o]=e,l=(r,o)=>{for(var e in o||(o={}))X.call(o,e)&&j(r,e,o[e]);if(N)for(var e of N(o))Y.call(o,e)&&j(r,e,o[e]);return r},D=(r,o)=>W(r,H(o));var k=(r,o,e)=>new Promise((c,n)=>{var f=m=>{try{h(e.next(m))}catch(T){n(T)}},p=m=>{try{h(e.throw(m))}catch(T){n(T)}},h=m=>m.done?c(m.value):Promise.resolve(m.value).then(f,p);h((e=e.apply(r,o)).next())});import{_ as L}from"./i18next.083d61f0.js";import{m as Z,i as $,I as tt,S as et,j as M}from"./index.9a33d21b.js";import{useState as A,useEffect as O,useMemo as x,useLayoutEffect as rt}from"react";import{d as C}from"./backend-status-codes.4c1943df.js";import{b as ot,s as st}from"./casino-connector.1ac217b7.js";import{l as B}from"./lazy.73833dcd.js";import{I as u}from"./index.2e7649fa.js";import{b as at}from"./index.3dc509b3.js";import{F as it}from"./index.f57a2e81.js";import{V as nt}from"./index.6cdb25e4.js";import{u as mt}from"./useMounted.6d9c5610.js";import{a as ut}from"./usePredefinedStakes.892527de.js";import{j as pt,k as E,h as w}from"./casino-data.e9191b01.js";import{j as ct,c as dt,d as lt,k as ft}from"./casino-data.957df014.js";import{g as Tt,a as gt}from"./user-data.358c1cdc.js";import{u as It}from"./useDispatch.151d3a82.js";import{u as _}from"./index.17630e7e.js";import"react-dom";import"./index.6af7a08e.js";import"./new-casino.e5c4000d.js";import"./swarm-command-names.afa48e3f.js";import"./index.fbd937ed.js";import"./app-data.3313f084.js";import"./create-test-id.17a0abc8.js";import"./create-fake-array.68114bc4.js";import"./get-tournament-time.5f47a243.js";import"./route-manipulation.7a3d02e7.js";import"./not-real-sports.64fc4139.js";import"./sportsbook.2cb562a0.js";import"./index.cb829a96.js";import"./styled-components.browser.esm.04179a03.js";import"./index.9c369ab9.js";import"./index.b40f854c.js";import"./index.1dfc2dcd.js";import"./useSbRouteMatch.ecfb9430.js";import"./sport-data.58080bc0.js";import"./new-sportsbook.6886dfa1.js";import"./useTranslation.70287e96.js";import"./context.f61a2be2.js";import"./useContentHeight.06461539.js";import"./odds.3bca0cb7.js";import"./socket.c1bf8301.js";import"./batch.dcd71b53.js";import"./index.9e499441.js";const{CasinoTournamentsDesktop:yt}=B(()=>L(()=>import("./index.f0e579e9.js"),["chunks/index.f0e579e9.js","chunks/i18next.083d61f0.js","chunks/backend-status-codes.4c1943df.js","chunks/index.9a33d21b.js","chunks/col.94909042.js","chunks/index.9011aacc.js","chunks/index.7d5f88f7.js","chunks/index.fbd937ed.js","chunks/create-test-id.17a0abc8.js","chunks/placements.2094afc0.js","chunks/app-data.3313f084.js","chunks/create-fake-array.68114bc4.js","chunks/index.17630e7e.js","chunks/lazy.73833dcd.js","chunks/index.1dfc2dcd.js","chunks/swarm-command-names.afa48e3f.js","chunks/index.f57a2e81.js","chunks/useContentHeight.06461539.js","chunks/casino-data.957df014.js","chunks/index.b9f7fddf.js","chunks/styled-components.browser.esm.04179a03.js","chunks/global-variables.eb46f49b.js","chunks/index.2e7649fa.js","chunks/index.10ad49d0.js","chunks/style.b04602fb.js","chunks/index.549a573d.js","chunks/Skeleton.a5b55c7c.js","chunks/toConsumableArray.635ccf3f.js","chunks/KeyCode.6413d982.js","chunks/Overflow.554112a5.js","chunks/CheckOutlined.2d4387be.js","chunks/SearchOutlined.0011f146.js","chunks/statusUtils.ab0a6b68.js","chunks/casino.a461d655.js","chunks/useTranslation.70287e96.js","chunks/context.f61a2be2.js"])),{CasinoTournamentsFilterMobile:_t}=B(()=>L(()=>import("./index.5f68c232.js"),["chunks/index.5f68c232.js","chunks/i18next.083d61f0.js","chunks/index.9a33d21b.js","chunks/lazy.73833dcd.js","chunks/index.b9f7fddf.js","chunks/styled-components.browser.esm.04179a03.js","chunks/backend-status-codes.4c1943df.js","chunks/global-variables.eb46f49b.js","chunks/create-fake-array.68114bc4.js","chunks/index.2e7649fa.js","chunks/swarm-command-names.afa48e3f.js","chunks/index.fbd937ed.js","chunks/app-data.3313f084.js","chunks/create-test-id.17a0abc8.js","chunks/index.17630e7e.js","chunks/casino-data.957df014.js","chunks/index.10ad49d0.js","chunks/style.b04602fb.js","chunks/index.549a573d.js","chunks/Skeleton.a5b55c7c.js","chunks/toConsumableArray.635ccf3f.js","chunks/placements.2094afc0.js","chunks/index.7d5f88f7.js","chunks/KeyCode.6413d982.js","chunks/Overflow.554112a5.js","chunks/index.9011aacc.js","chunks/col.94909042.js","chunks/CheckOutlined.2d4387be.js","chunks/SearchOutlined.0011f146.js","chunks/statusUtils.ab0a6b68.js","chunks/casino.a461d655.js","chunks/useTranslation.70287e96.js","chunks/context.f61a2be2.js"])),ht=3,de=({configs:r,externalClass:o,skeletonCount:e})=>{const c=It(),n=_(ct),f=_(dt),p=_(lt),h=_(ft),m=_(Tt),T=ut(m),[F,S]=A(!0),[I,b]=A(null),V=Z(),G=_(gt),[J,U]=A(void 0),q=r.tournamentType===u.ALL,z=$()?JSON.stringify(n):n.status;O(()=>{c(pt(r.tournamentType===u.ALL?u.CASINO:r.tournamentType))},[]),O(()=>{const{tournamentId:s}=tt.parse(window.location.search,{ignoreQueryPrefix:!0});U(s)},[V.search]);const{mounted:R}=mt(),K=r.tournamentType===u.SPORT,d=x(()=>{let s;if(p){const t=C();return s=f[p].filter(a=>{let i=!0,g=!0;const y=C.utc(a.RegistrationStartDate),v=C.utc(a.RegistrationEndDate);return n.registration?i=t.isBefore(v)&&y.isBefore(t):n.registration===!1&&(i=v.isBefore(t)),n.entryType?g=a.RegistrationAmount===0:n.entryType==0&&(g=a.RegistrationAmount>0),i&&g}),s}},[n.registration,n.entryType,f,p]);O(()=>{if(d===void 0){c(E(!1));return}const s=d.filter(({Id:t})=>!(I!=null&&I[t]));if(et.MOCKED_DATA){L(()=>import("./tournament-games.20e40bc7.js"),[]).then(({mockedTournamentGames:t})=>{s.forEach(({Id:a})=>{b(i=>D(l({},i),{[a]:t[a]}))}),d&&c(E(!0))});return}Promise.all(s.map(a=>k(void 0,[a],function*({Id:t}){return{id:t,data:yield ot({tournament_id:t,limit:ht})}}))).then(t=>{if(!R.current)return;const a=t.reduce((i,{id:g,data:y})=>(i[g]=y,i),{});d&&c(E(!0)),b(i=>l(l({},i||{}),a))})},[d]),O(()=>{if(f&&!m&&T){const s={[u.CASINO]:f[u.CASINO].map(t=>D(l({},t),{JoinDate:null,IsParticipated:!1})),[u.SPORT]:f[u.SPORT].map(t=>D(l({},t),{JoinDate:null,IsParticipated:!1}))};Object.keys(s||{}).forEach(t=>{s[Number(t)].length&&c(w({data:s[Number(t)],productTypeId:Number(t)}))})}},[m,T]),rt(()=>{if(G.pending||!p)return;let s;n.status[0]===0?s=st.slice(1).map(t=>t.value):s=n.status,S(!0),at({stage_list:s,product_type_id:p},t=>{t&&R.current&&(S(!1),c(w({data:t.result,productTypeId:p})))})},[z,m,T,p]);const P=x(()=>I?(d||[]).reduce((t,a)=>{var y;const i=I[a.Id]||{};if(!((y=i.items)!=null&&y.length)&&a.ProductTypeId!==u.SPORT)return t;const g=a.ProductTypeId===u.CASINO?{games:i.items,gamesTotalCount:Number(i.total_count)}:{};return t.push(l(l({},a),g)),t},[]):null,[d,I]);return M.jsx(nt,{desktop:yt,mobile:_t,innerProps:{tournamentId:J,filteredTournaments:P!=null&&P.length?P:d,loading:!h||F,isSportsTournament:K,externalClass:o,skeletonCount:e,showCasinoSportTabs:q},fallback:M.jsx(it,{})})};export{de as CasinoTournaments};
