import{useCallback as _,useEffect as f}from"react";import{u as E,S as p}from"./index.9a33d21b.js";import{L as i,s as a}from"./swarm-command-names.afa48e3f.js";import{g as I}from"./game-url.afce1e8e.js";import{A as m,b as c}from"./index.c7348bcc.js";import{s as N,a as S}from"./index.1dfc2dcd.js";import{g}from"./user-data.358c1cdc.js";import{u as A}from"./index.17630e7e.js";const y=n=>{const o=A(g),l=E(),u=_((e="fun")=>{if(e==="real"&&!o){N(),window.refreshWhenLoggedIn&&!p.CASINO_MOBILE_IFRAME&&i.setItem(a("casino","OPEN_CASINO_GAME_WHEN_REFRESH"),JSON.stringify({extearnal_game_id:(n==null?void 0:n.extearnal_game_id)||"",game_options:(n==null?void 0:n.game_options)||null}));const t=new c;return l.push(S({accounts:"*",login:"*"})),t.appendAction(m.OPEN_CASINO_GAME,()=>new Promise(s=>{r("real"),s(!0)})),null}else return r(e),null},[n,o]);f(()=>{const e=JSON.parse(i.getItem(a("casino","OPEN_CASINO_GAME_WHEN_REFRESH")));o&&e&&(i.removeItem(a("casino","OPEN_CASINO_GAME_WHEN_REFRESH")),r("real",(e==null?void 0:e.extearnal_game_id)||"",(e==null?void 0:e.game_options)||null))},[o]);const r=_((e="fun",t="",s=null)=>(n&&window.open(I({gameId:t||n.extearnal_game_id,gameType:e,gameOptions:s||n.game_options}),"_self"),null),[n]);return u};export{y as u};
