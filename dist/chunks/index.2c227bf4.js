(function(){"use strict";try{if(typeof document!="undefined"){var e=document.createElement("style");e.appendChild(document.createTextNode(".notificationIcon{display:flex;color:var(--v3-black-45)}.notificationIcon .customSkeleton-button{min-width:20px;width:20px;height:20px}@media (hover: hover) and (pointer: fine){.selectedIcon:hover{color:var(--v3-primary-5)}}.videoCamIcon:hover{color:var(--v3-primary-5)}.videoCamIcon__icon{color:var(--v3-red-5);margin-right:15px}")),document.head.appendChild(e)}}catch(o){console.error("vite-plugin-css-injected-by-js",o)}})();
var O=(t,e,n)=>new Promise((o,a)=>{var c=s=>{try{r(n.next(s))}catch(l){a(l)}},u=s=>{try{r(n.throw(s))}catch(l){a(l)}},r=s=>s.done?o(s.value):Promise.resolve(s.value).then(c,u);r((n=n.apply(t,e)).next())});import{u as x,S as E,j as f}from"./index.053dea56.js";import{useCallback as g,useState as M}from"react";import{C as k,E as B}from"./index.652e9765.js";import{G as b}from"./app-data.da3833f4.js";import{o as v}from"./api-post-message-sender.98c07ac7.js";import{C as A}from"./swarm-command-names.230156ba.js";import{R as S,p as U}from"./index.c0392060.js";import{s as R,a as G}from"./index.fcbc691d.js";import{B as L,C as N}from"./sport-data.b40f7b49.js";import{u as V}from"./useDispatch.cd750ed9.js";import{a as j,g as y}from"./user-data.f480309c.js";import{u as p}from"./index.ffa75b49.js";var h=(t=>(t.TOGGLE_BET_BUILDER_MODAL="toggleBetBuilderModal",t.BOOKING_BET_GET_EVENT_ID="bookingBetGetEventId",t.NAVIGATE_TO_MY_CASINO="navigateToMyCasino",t.SUBSCRIBE_FOR_NOTIFICATION="subscribeForNotifications",t.OPT_IN_ACTION="optInAction",t.OPEN_CASINO_GAME="openCasinoGame",t.CONSTRUCT_CASINO_VIEW_URL="constructCasinoViewUrl",t.RECONSTRUCT_CASINO_VIEW_URL="reconstructCasinoViewUrl",t.RACING_BET_MODAL="racingBetModal",t.OPEN_FAVORITE_TEAM_POPUP="openFavoriteTeamPopup",t.OPEN_SINGLE_GAME_FROM_MINIMIZED_STREAMING="openSingleGameFromMinimizedStreaming",t))(h||{});const I=class i{constructor(){if(this.setAfterExecutionCallback=e=>{i.afterExecutionCallback=e},this.setFinalExecutionCallback=e=>{i.finalExecutionCallback=e},this.appendAction=(e,n)=>{i.actions[e]=n},this.isActionsExist=()=>!!Object.values(i.actions).length,this.removeActions=()=>{i.actions={}},this.executeActions=()=>{const e=()=>new Promise(n=>{n(!0)});Promise.all([...Object.values(i.actions),e].map(n=>n())).then(()=>{i.actions={},i.afterExecutionCallback&&i.afterExecutionCallback(),i.finalExecutionCallback&&i.finalExecutionCallback()})},i._instance)return i._instance;i._instance=this}};I.actions={};let D=I;const w=["Soccer","Basketball","Tennis","TableTennis","Volleyball","Baseball","IceHockey","LeagueOfLegends","Dota2","CyberFootball","CounterStrike"],P=(t,e,n,o)=>{const a={command:A.SET_GAMES_NOTIFICATIONS,params:{game_list:[t],events:[{event_name:"MatchFinished",is_subscribed:e}]},rid:S.gForCommand()};U.then(c=>{c.sendCommand(a,"",n,null,o)})},F=({notificationLoading:t,setNotificationLoading:e,game:n,userSportNotifications:o,shouldSubscribeForNotifications:a,userPending:c,isLoggedIn:u})=>{const r=V(),s=x(),l=g(()=>new Promise(m=>{e(!0),P({id:n.id,game_start_ts:n.start_ts},a,C=>{C.details.code===0&&(r(L({[n.id]:{events:[{event_name:"MatchFinished",is_subscribed:a}]}})),e(!1)),m(!0)},()=>{e(!1),m(!0)})}),[o,n.id,n.start_ts,a]);return{handleNotificationClick:g(m=>O(void 0,null,function*(){m.stopPropagation(),!t&&(c||(u?yield l():E.IFRAME_SPORTSBOOK?v("login"):(R(),s.push(G({accounts:"*",login:"*"})),new D().appendAction(h.SUBSCRIBE_FOR_NOTIFICATION,l))))}),[c,u,a,t])}};const T=({game:t,size:e,iconContainerSize:n})=>{var d,m;const o=p(j),a=p(y),[c,u]=M(!1),r=p(N),s=!((m=(d=r[t.id])==null?void 0:d.events[0])!=null&&m.is_subscribed),{handleNotificationClick:l}=F({notificationLoading:c,setNotificationLoading:u,game:t,shouldSubscribeForNotifications:s,userSportNotifications:r,userPending:!!o.pending,isLoggedIn:a});return f.jsx(k,{onClick:l,iconContainerSize:n,className:"notificationIcon",children:f.jsx(b,{lib:"generic",name:s?"notificationOff":"notificationOn",theme:"default",size:e,className:"selectedIcon"})})},nt=({currentSport:t,game:e,size:n,iconContainerSize:o})=>w.includes(t)?f.jsx(T,{currentSport:t,game:e,size:n,iconContainerSize:o}):null;const et=({size:t,iconContainerSize:e,className:n,marginDirection:o="left"})=>f.jsx(B,{margin:o,iconContainerSize:e,icon:f.jsx(b,{lib:"generic",name:"videoCam",theme:"default",size:t,className:n})});export{h as A,w as N,et as V,nt as a,D as b};
