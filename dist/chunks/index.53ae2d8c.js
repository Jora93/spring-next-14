var Q=Object.defineProperty,W=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var j=(r,o,e)=>o in r?Q(r,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[o]=e,l=(r,o)=>{for(var e in o||(o={}))X.call(o,e)&&j(r,e,o[e]);if(N)for(var e of N(o))Y.call(o,e)&&j(r,e,o[e]);return r},D=(r,o)=>W(r,H(o));var k=(r,o,e)=>new Promise((c,n)=>{var f=m=>{try{h(e.next(m))}catch(T){n(T)}},p=m=>{try{h(e.throw(m))}catch(T){n(T)}},h=m=>m.done?c(m.value):Promise.resolve(m.value).then(f,p);h((e=e.apply(r,o)).next())});import{_ as L}from"./i18next.083d61f0.js";import{e as Z,i as $,I as tt,S as et,j as M}from"./index.053dea56.js";import{useState as A,useEffect as O,useMemo as x,useLayoutEffect as rt}from"react";import{d as C}from"./backend-status-codes.80bfe624.js";import{b as ot,s as st}from"./casino-connector.c21d5163.js";import{l as B}from"./lazy.73833dcd.js";import{I as u}from"./index.c0392060.js";import{b as at}from"./index.07b8ab74.js";import{F as it}from"./index.4def701f.js";import{V as nt}from"./index.68ae7eeb.js";import{u as mt}from"./useMounted.6d9c5610.js";import{a as ut}from"./usePredefinedStakes.58f7290f.js";import{j as pt,k as E,h as w}from"./casino-data.6512dc9e.js";import{j as ct,c as dt,d as lt,k as ft}from"./casino-data.d1fb1a26.js";import{g as Tt,a as gt}from"./user-data.f480309c.js";import{u as It}from"./useDispatch.cd750ed9.js";import{u as _}from"./index.ffa75b49.js";import"react-dom";import"./index.058a83a7.js";import"./new-casino.e5c4000d.js";import"./swarm-command-names.230156ba.js";import"./index.fbd937ed.js";import"./app-data.da3833f4.js";import"./create-test-id.17a0abc8.js";import"./create-fake-array.68114bc4.js";import"./get-tournament-time.134e5bb0.js";import"./route-manipulation.fb85cda5.js";import"./not-real-sports.64fc4139.js";import"./sportsbook.2cb562a0.js";import"./index.5ffe4536.js";import"./styled-components.browser.esm.22f548e7.js";import"./index.652e9765.js";import"./index.9f857438.js";import"./index.fcbc691d.js";import"./useSbRouteMatch.6006fa30.js";import"./sport-data.b40f7b49.js";import"./new-sportsbook.b7bad95f.js";import"./useTranslation.70287e96.js";import"./context.f61a2be2.js";import"./useContentHeight.a1c79de7.js";import"./odds.334494eb.js";import"./socket.c077606d.js";import"./batch.dcd71b53.js";import"./index.59a19261.js";const{CasinoTournamentsDesktop:yt}=B(()=>L(()=>import("./index.51fbd61b.js"),["chunks/index.51fbd61b.js","chunks/i18next.083d61f0.js","chunks/backend-status-codes.80bfe624.js","chunks/index.053dea56.js","chunks/col.a0c1837e.js","chunks/index.66ee6c8a.js","chunks/index.9a56940c.js","chunks/index.fbd937ed.js","chunks/create-test-id.17a0abc8.js","chunks/placements.f27399b1.js","chunks/app-data.da3833f4.js","chunks/create-fake-array.68114bc4.js","chunks/index.ffa75b49.js","chunks/lazy.73833dcd.js","chunks/index.fcbc691d.js","chunks/swarm-command-names.230156ba.js","chunks/index.4def701f.js","chunks/useContentHeight.a1c79de7.js","chunks/casino-data.d1fb1a26.js","chunks/index.557ee717.js","chunks/styled-components.browser.esm.22f548e7.js","chunks/global-variables.eb46f49b.js","chunks/index.c0392060.js","chunks/index.e56a0208.js","chunks/style.32a730b7.js","chunks/index.536e01bf.js","chunks/Skeleton.d4e88166.js","chunks/toConsumableArray.19249869.js","chunks/KeyCode.6413d982.js","chunks/Overflow.5f48b1c8.js","chunks/CheckOutlined.795713a5.js","chunks/SearchOutlined.02ed5a97.js","chunks/statusUtils.c2dcc692.js","chunks/casino.9f590000.js","chunks/useTranslation.70287e96.js","chunks/context.f61a2be2.js"])),{CasinoTournamentsFilterMobile:_t}=B(()=>L(()=>import("./index.40c725e9.js"),["chunks/index.40c725e9.js","chunks/i18next.083d61f0.js","chunks/index.053dea56.js","chunks/lazy.73833dcd.js","chunks/index.557ee717.js","chunks/styled-components.browser.esm.22f548e7.js","chunks/backend-status-codes.80bfe624.js","chunks/global-variables.eb46f49b.js","chunks/create-fake-array.68114bc4.js","chunks/index.c0392060.js","chunks/swarm-command-names.230156ba.js","chunks/index.fbd937ed.js","chunks/app-data.da3833f4.js","chunks/create-test-id.17a0abc8.js","chunks/index.ffa75b49.js","chunks/casino-data.d1fb1a26.js","chunks/index.e56a0208.js","chunks/style.32a730b7.js","chunks/index.536e01bf.js","chunks/Skeleton.d4e88166.js","chunks/toConsumableArray.19249869.js","chunks/placements.f27399b1.js","chunks/index.9a56940c.js","chunks/KeyCode.6413d982.js","chunks/Overflow.5f48b1c8.js","chunks/index.66ee6c8a.js","chunks/col.a0c1837e.js","chunks/CheckOutlined.795713a5.js","chunks/SearchOutlined.02ed5a97.js","chunks/statusUtils.c2dcc692.js","chunks/casino.9f590000.js","chunks/useTranslation.70287e96.js","chunks/context.f61a2be2.js"])),ht=3,de=({configs:r,externalClass:o,skeletonCount:e})=>{const c=It(),n=_(ct),f=_(dt),p=_(lt),h=_(ft),m=_(Tt),T=ut(m),[F,S]=A(!0),[I,b]=A(null),V=Z(),G=_(gt),[J,U]=A(void 0),q=r.tournamentType===u.ALL,z=$()?JSON.stringify(n):n.status;O(()=>{c(pt(r.tournamentType===u.ALL?u.CASINO:r.tournamentType))},[]),O(()=>{const{tournamentId:s}=tt.parse(window.location.search,{ignoreQueryPrefix:!0});U(s)},[V.search]);const{mounted:R}=mt(),K=r.tournamentType===u.SPORT,d=x(()=>{let s;if(p){const t=C();return s=f[p].filter(a=>{let i=!0,g=!0;const y=C.utc(a.RegistrationStartDate),v=C.utc(a.RegistrationEndDate);return n.registration?i=t.isBefore(v)&&y.isBefore(t):n.registration===!1&&(i=v.isBefore(t)),n.entryType?g=a.RegistrationAmount===0:n.entryType==0&&(g=a.RegistrationAmount>0),i&&g}),s}},[n.registration,n.entryType,f,p]);O(()=>{if(d===void 0){c(E(!1));return}const s=d.filter(({Id:t})=>!(I!=null&&I[t]));if(et.MOCKED_DATA){L(()=>import("./tournament-games.20e40bc7.js"),[]).then(({mockedTournamentGames:t})=>{s.forEach(({Id:a})=>{b(i=>D(l({},i),{[a]:t[a]}))}),d&&c(E(!0))});return}Promise.all(s.map(a=>k(void 0,[a],function*({Id:t}){return{id:t,data:yield ot({tournament_id:t,limit:ht})}}))).then(t=>{if(!R.current)return;const a=t.reduce((i,{id:g,data:y})=>(i[g]=y,i),{});d&&c(E(!0)),b(i=>l(l({},i||{}),a))})},[d]),O(()=>{if(f&&!m&&T){const s={[u.CASINO]:f[u.CASINO].map(t=>D(l({},t),{JoinDate:null,IsParticipated:!1})),[u.SPORT]:f[u.SPORT].map(t=>D(l({},t),{JoinDate:null,IsParticipated:!1}))};Object.keys(s||{}).forEach(t=>{s[Number(t)].length&&c(w({data:s[Number(t)],productTypeId:Number(t)}))})}},[m,T]),rt(()=>{if(G.pending||!p)return;let s;n.status[0]===0?s=st.slice(1).map(t=>t.value):s=n.status,S(!0),at({stage_list:s,product_type_id:p},t=>{t&&R.current&&(S(!1),c(w({data:t.result,productTypeId:p})))})},[z,m,T,p]);const P=x(()=>I?(d||[]).reduce((t,a)=>{var y;const i=I[a.Id]||{};if(!((y=i.items)!=null&&y.length)&&a.ProductTypeId!==u.SPORT)return t;const g=a.ProductTypeId===u.CASINO?{games:i.items,gamesTotalCount:Number(i.total_count)}:{};return t.push(l(l({},a),g)),t},[]):null,[d,I]);return M.jsx(nt,{desktop:yt,mobile:_t,innerProps:{tournamentId:J,filteredTournaments:P!=null&&P.length?P:d,loading:!h||F,isSportsTournament:K,externalClass:o,skeletonCount:e,showCasinoSportTabs:q},fallback:M.jsx(it,{})})};export{de as CasinoTournaments};
