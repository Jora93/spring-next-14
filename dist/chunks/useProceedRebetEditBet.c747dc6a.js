(function(){"use strict";try{if(typeof document!="undefined"){var t=document.createElement("style");t.appendChild(document.createTextNode('.ant-tooltip{box-sizing:border-box;margin:0;padding:0;color:#000000d9;font-size:14px;font-variant:tabular-nums;line-height:1.5715;list-style:none;font-feature-settings:"tnum";position:absolute;z-index:1070;display:block;width:max-content;width:intrinsic;max-width:250px;visibility:visible}.ant-tooltip-content{position:relative}.ant-tooltip-hidden{display:none}.ant-tooltip-placement-top,.ant-tooltip-placement-topLeft,.ant-tooltip-placement-topRight{padding-bottom:14.3137085px}.ant-tooltip-placement-right,.ant-tooltip-placement-rightTop,.ant-tooltip-placement-rightBottom{padding-left:14.3137085px}.ant-tooltip-placement-bottom,.ant-tooltip-placement-bottomLeft,.ant-tooltip-placement-bottomRight{padding-top:14.3137085px}.ant-tooltip-placement-left,.ant-tooltip-placement-leftTop,.ant-tooltip-placement-leftBottom{padding-right:14.3137085px}.ant-tooltip-inner{min-width:30px;min-height:32px;padding:6px 8px;color:#fff;text-align:left;text-decoration:none;word-wrap:break-word;background-color:#000000bf;border-radius:2px;box-shadow:0 3px 6px -4px #0000001f,0 6px 16px #00000014,0 9px 28px 8px #0000000d}.ant-tooltip-arrow{position:absolute;z-index:2;display:block;width:22px;height:22px;overflow:hidden;background:transparent;pointer-events:none}.ant-tooltip-arrow-content{--antd-arrow-background-color: linear-gradient(to right bottom, rgba(0, 0, 0, .65), rgba(0, 0, 0, .75));position:absolute;inset:0;display:block;width:11.3137085px;height:11.3137085px;margin:auto;background-color:transparent;content:"";pointer-events:auto;border-radius:0 0 2px;pointer-events:none}.ant-tooltip-arrow-content:before{position:absolute;top:-11.3137085px;left:-11.3137085px;width:33.9411255px;height:33.9411255px;background:var(--antd-arrow-background-color);background-repeat:no-repeat;background-position:-10px -10px;content:"";clip-path:path("M 9.849242404917499 24.091883092036785 A 5 5 0 0 1 13.384776310850237 22.627416997969522 L 20.627416997969522 22.627416997969522 A 2 2 0 0 0 22.627416997969522 20.627416997969522 L 22.627416997969522 13.384776310850237 A 5 5 0 0 1 24.091883092036785 9.849242404917499 L 23.091883092036785 9.849242404917499 L 9.849242404917499 23.091883092036785 Z")}.ant-tooltip-placement-top .ant-tooltip-arrow,.ant-tooltip-placement-topLeft .ant-tooltip-arrow,.ant-tooltip-placement-topRight .ant-tooltip-arrow{bottom:0;transform:translateY(100%)}.ant-tooltip-placement-top .ant-tooltip-arrow-content,.ant-tooltip-placement-topLeft .ant-tooltip-arrow-content,.ant-tooltip-placement-topRight .ant-tooltip-arrow-content{box-shadow:3px 3px 7px #00000012;transform:translateY(-11px) rotate(45deg)}.ant-tooltip-placement-top .ant-tooltip-arrow{left:50%;transform:translateY(100%) translate(-50%)}.ant-tooltip-placement-topLeft .ant-tooltip-arrow{left:13px}.ant-tooltip-placement-topRight .ant-tooltip-arrow{right:13px}.ant-tooltip-placement-right .ant-tooltip-arrow,.ant-tooltip-placement-rightTop .ant-tooltip-arrow,.ant-tooltip-placement-rightBottom .ant-tooltip-arrow{left:0;transform:translate(-100%)}.ant-tooltip-placement-right .ant-tooltip-arrow-content,.ant-tooltip-placement-rightTop .ant-tooltip-arrow-content,.ant-tooltip-placement-rightBottom .ant-tooltip-arrow-content{box-shadow:-3px 3px 7px #00000012;transform:translate(11px) rotate(135deg)}.ant-tooltip-placement-right .ant-tooltip-arrow{top:50%;transform:translate(-100%) translateY(-50%)}.ant-tooltip-placement-rightTop .ant-tooltip-arrow{top:5px}.ant-tooltip-placement-rightBottom .ant-tooltip-arrow{bottom:5px}.ant-tooltip-placement-left .ant-tooltip-arrow,.ant-tooltip-placement-leftTop .ant-tooltip-arrow,.ant-tooltip-placement-leftBottom .ant-tooltip-arrow{right:0;transform:translate(100%)}.ant-tooltip-placement-left .ant-tooltip-arrow-content,.ant-tooltip-placement-leftTop .ant-tooltip-arrow-content,.ant-tooltip-placement-leftBottom .ant-tooltip-arrow-content{box-shadow:3px -3px 7px #00000012;transform:translate(-11px) rotate(315deg)}.ant-tooltip-placement-left .ant-tooltip-arrow{top:50%;transform:translate(100%) translateY(-50%)}.ant-tooltip-placement-leftTop .ant-tooltip-arrow{top:5px}.ant-tooltip-placement-leftBottom .ant-tooltip-arrow{bottom:5px}.ant-tooltip-placement-bottom .ant-tooltip-arrow,.ant-tooltip-placement-bottomLeft .ant-tooltip-arrow,.ant-tooltip-placement-bottomRight .ant-tooltip-arrow{top:0;transform:translateY(-100%)}.ant-tooltip-placement-bottom .ant-tooltip-arrow-content,.ant-tooltip-placement-bottomLeft .ant-tooltip-arrow-content,.ant-tooltip-placement-bottomRight .ant-tooltip-arrow-content{box-shadow:-3px -3px 7px #00000012;transform:translateY(11px) rotate(225deg)}.ant-tooltip-placement-bottom .ant-tooltip-arrow{left:50%;transform:translateY(-100%) translate(-50%)}.ant-tooltip-placement-bottomLeft .ant-tooltip-arrow{left:13px}.ant-tooltip-placement-bottomRight .ant-tooltip-arrow{right:13px}.ant-tooltip-pink .ant-tooltip-inner{background-color:#eb2f96}.ant-tooltip-pink .ant-tooltip-arrow-content:before{background:#eb2f96}.ant-tooltip-magenta .ant-tooltip-inner{background-color:#eb2f96}.ant-tooltip-magenta .ant-tooltip-arrow-content:before{background:#eb2f96}.ant-tooltip-red .ant-tooltip-inner{background-color:#f5222d}.ant-tooltip-red .ant-tooltip-arrow-content:before{background:#f5222d}.ant-tooltip-volcano .ant-tooltip-inner{background-color:#fa541c}.ant-tooltip-volcano .ant-tooltip-arrow-content:before{background:#fa541c}.ant-tooltip-orange .ant-tooltip-inner{background-color:#fa8c16}.ant-tooltip-orange .ant-tooltip-arrow-content:before{background:#fa8c16}.ant-tooltip-yellow .ant-tooltip-inner{background-color:#fadb14}.ant-tooltip-yellow .ant-tooltip-arrow-content:before{background:#fadb14}.ant-tooltip-gold .ant-tooltip-inner{background-color:#faad14}.ant-tooltip-gold .ant-tooltip-arrow-content:before{background:#faad14}.ant-tooltip-cyan .ant-tooltip-inner{background-color:#13c2c2}.ant-tooltip-cyan .ant-tooltip-arrow-content:before{background:#13c2c2}.ant-tooltip-lime .ant-tooltip-inner{background-color:#a0d911}.ant-tooltip-lime .ant-tooltip-arrow-content:before{background:#a0d911}.ant-tooltip-green .ant-tooltip-inner{background-color:#52c41a}.ant-tooltip-green .ant-tooltip-arrow-content:before{background:#52c41a}.ant-tooltip-blue .ant-tooltip-inner{background-color:#1890ff}.ant-tooltip-blue .ant-tooltip-arrow-content:before{background:#1890ff}.ant-tooltip-geekblue .ant-tooltip-inner{background-color:#2f54eb}.ant-tooltip-geekblue .ant-tooltip-arrow-content:before{background:#2f54eb}.ant-tooltip-purple .ant-tooltip-inner{background-color:#722ed1}.ant-tooltip-purple .ant-tooltip-arrow-content:before{background:#722ed1}.ant-tooltip-rtl{direction:rtl}.ant-tooltip-rtl .ant-tooltip-inner{text-align:right}')),document.head.appendChild(t)}}catch(o){console.error("vite-plugin-css-injected-by-js",o)}})();
var H=Object.defineProperty,ee=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var O=(e,a,t)=>a in e?H(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,B=(e,a)=>{for(var t in a||(a={}))se.call(a,t)&&O(e,t,a[t]);if(F)for(var t of F(a))ae.call(a,t)&&O(e,t,a[t]);return e},x=(e,a)=>ee(e,te(a));var A=(e,a,t)=>new Promise((d,u)=>{var g=i=>{try{o(t.next(i))}catch(l){u(l)}},c=i=>{try{o(t.throw(i))}catch(l){u(l)}},o=i=>i.done?d(i.value):Promise.resolve(i.value).then(g,c);o((t=t.apply(e,a)).next())});import{s as I}from"./backend-status-codes.80bfe624.js";import{I as oe}from"./index.bacdcf22.js";import{B as D}from"./index.9a56940c.js";import{j as n,i as G,u as X,G as v,aj as ie,S as W,L as ne}from"./index.053dea56.js";import{useState as re,useCallback as y,useMemo as ce}from"react";import{C as me,L as k,s as z,k as le}from"./swarm-command-names.230156ba.js";import{p as pe,R as de,bw as ue,am as K,aa as fe,bx as _e,by as U,az as ge,bp as Ee,aB as J}from"./index.c0392060.js";import{F as he}from"./index.b2e0e810.js";import"./col.a0c1837e.js";import{c as Be}from"./index.fbd937ed.js";import{s as xe}from"./styled-components.browser.esm.22f548e7.js";import{w as ye,M as Q,b as Y}from"./app-data.da3833f4.js";import{M as be,a as Se}from"./index.ee65228f.js";import{u as b}from"./useTranslation.70287e96.js";import{S as Ie}from"./index.bb518843.js";import{a as Pe}from"./route-manipulation.fb85cda5.js";import{x as Ce}from"./usePredefinedStakes.58f7290f.js";import{g as Me,a as Ne}from"./index.fcbc691d.js";import{m as Te,u as Le}from"./useBetlsipNotEmptyPopup.d6fe3ab1.js";import{t as je}from"./quickBetActions.c1df7177.js";import{u as we}from"./useSearchParams.0c3b0efc.js";import{a as Re}from"./index.59a19261.js";import{g as Fe}from"./spec-elems.3577ab05.js";import{u as Oe}from"./useDispatch.cd750ed9.js";import{u as q}from"./index.ffa75b49.js";const Ae=(e,a,t)=>{pe.then(d=>{d.sendCommand({command:me.SEND_GIFT_BET,params:e,rid:de.gForCommand()},"",a,null,t)})},De=xe.p`
  margin: 12px auto 24px;
  text-align: center;
  color: var(--v3-black-85);
  font-size: 14px;
`,V=({title:e,description:a,Input:t,Image:d,visible:u,onCancel:g,onFinish:c,enableAutocomplete:o,singleButton:i=!1,classname:l,width:p,form:E})=>{const{t:f}=b();return n.jsxs(be,{className:Be([{[`${l}`]:!!l}]),renderInBody:!0,zIndex:ye,visible:u,title:e,align:"center",image:d,padding:G()?Q.MOBILE_12:Q.DESKTOP_24,width:p||(G()?Y.MOBILE_350:Y.DESKTOP_468),centered:!0,onCancel:()=>g(!1),children:[n.jsx(De,{children:a}),n.jsxs(he,x(B(x(B({},E&&{form:E}),{form:E,onFinish:c,size:"large"}),!o&&{autoComplete:"off"}),{children:[n.jsx("input",{style:{display:"none"},type:"text",name:"fakeInputForAutofill"}),t,n.jsxs(Se,{children:[!i&&n.jsx(D,{type:"cancel",size:"large",onClick:()=>g(!1),children:f("account.cancel")}),n.jsx(D,{type:"primary",size:"large",htmlType:"submit",children:f("account.submit")})]})]}))]})},ut=({currentTicket:e,betTickets:a,setBetTickets:t,visible:d,setVisible:u})=>{const[g,c]=re(!1),{t:o}=b(),i=l=>{Ae({bet_id:e==null?void 0:e.id,email:l.email},p=>{if(p.result===0){const E=a.map(f=>f.id===(e==null?void 0:e.id)?x(B({},f),{is_gift:!0,cash_out:null}):f);t(E),u(!1),c(!0)}else I(p.result_text)},p=>{I(p.data.result_text)})};return n.jsxs(n.Fragment,{children:[n.jsx(V,{title:o("account.successMessage"),description:o("account.successGiftBet"),visible:g,Image:{lib:"generic",name:"success",theme:"colored"},onCancel:c,singleButton:!0,onFinish:()=>c(!1)}),n.jsx(V,{enableAutocomplete:!0,title:o("account.giftMyBet"),description:o("account.giftEmailDesc"),Input:n.jsx(Ie,{name:"email",hasFeedback:!0,rules:[{required:!0,type:"email",message:o("account.emailInput")}],children:n.jsx(oe,{placeholder:o("account.emailPlaceholder")})}),Image:{lib:"generic",name:"gift",theme:"colored",size:72},visible:d,onCancel:u,onFinish:i})]})},Ge=()=>{const e=X();return y(()=>(e.replace(Me()),Promise.resolve()),[])},ve=()=>{const{t:e}=b(),a=y(t=>{Te({title:e("betslip.editBetConfirmationTitle"),text:e("betslip.editBetConfirmationText"),successBtn:{text:e("account.proceed"),onClick:t},cancelBtn:{text:e("account.cancel")},closable:!1})},[]);return ce(()=>({openPopup:a}),[])},ft=(e,a=!1)=>{const t=Oe(),d=X(),{t:u}=b(),g=Ge(),{accounts:c}=we(),o=q(Re),{showPopup:i}=Le(),{openPopup:l}=ve(),p=q(Fe),E=y((_,r=!1)=>{r?l(()=>{f(_,r)}):f(_,r)},[e]),f=(_,r=!1)=>{ue()?P(_,r):i(()=>{P(_,r)})},Z=_=>new Promise(r=>{Ce(_.events.map(m=>({eventId:m.selection_id,gameId:m.game_id})),m=>{r(m.data.event)},()=>{r({})},!0)}),P=y((_,r)=>A(void 0,null,function*(){K({id:v,stake:""});const m=fe(e,"id",_,!1),C=[],S=[],$=yield Z(m),h=Object.keys($);if(h.length||I(u("betslip.allEventsSuspended"),a?document.getElementById("open-bets"):void 0),m.events.map(s=>{var N,T,L,j,w,R;!r&&!h.includes(s.selection_id.toString())||s.outcome!==0||(C.push(s.selection_id),S.push({sport_index:s.sport_index,region_name:s.region_name,game_start_date:s.game_start_date,market_name:s.market_name,marketType:"",sp:s.coeficient===ie,gameId:s.game_id,eventId:s.selection_id,event_name:s.event_name,coeficient:s.coeficient,eventBase:s.basis,team1:s.team1,team2:s.team2||"",game_name:s.game_name,sport_name:s.sport_name,competition_name:s.competition_name,fromRebetEditBet:!0,isLive:s.isLive,ewAllowed:!!((T=JSON.parse((N=s.extra_info)!=null?N:"{}"))!=null&&T.EachWayK),market:{extra_info:{EachWayK:(j=JSON.parse((L=s.extra_info)!=null?L:"{}"))==null?void 0:j.EachWayK,EachWayPlace:(R=JSON.parse((w=s.extra_info)!=null?w:"{}"))==null?void 0:R.EachWayPlace}}}))}),r){const s={active:!0,amount:m.cash_out,betId:m.events[0].bet_id,eventIds:C};k.setItem(z("betslip","EDIT_BET_ACTIVE"),JSON.stringify(s)),o&&je(!1),t(_e(s)),K({id:v,stake:""})}const M=Pe(W.PAGE_URLS.prematch);if(M||(U(S,!0),h.length&&t(ge(ne.BETSLIP))),m.type!==1&&Ee(le[m.type]),h.length){if(M){const s=()=>{k.setItem(z("betslip","MUST_OPEN"),JSON.stringify("true")),window.removeEventListener("beforeunload",s)};U(S,!0),window.addEventListener("beforeunload",s),setTimeout(()=>window.location.href=W.PAGE_URLS.prematch);return}else c&&d.push(Ne({accounts:void 0,"bet-history":void 0}));c?g().then(()=>{p&&t(J(!0))}):p&&t(J(!0))}}),[p,e,o,c]);return{executeRebet:E}};export{ut as G,ft as u};
