var F=Object.defineProperty;var y=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var A=(o,e,s)=>e in o?F(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s,v=(o,e)=>{for(var s in e||(e={}))T.call(e,s)&&A(o,s,e[s]);if(y)for(var s of y(e))$.call(e,s)&&A(o,s,e[s]);return o};import{u as P,S as d,i as O,j as E}from"./index.053dea56.js";import{useMemo as C,useCallback as U,useEffect as g}from"react";import{s as B}from"./array-sort-by.690dd174.js";import{g as J}from"./route-manipulation.fb85cda5.js";import{R as K}from"./index.c0392060.js";import{u as Z}from"./get-data-level.db296203.js";import{EmptyMatches as H}from"./index.03ce9bd5.js";import{F as W}from"./Favorites.707ad36d.js";import{G as q}from"./index.5162f16b.js";import{u as w}from"./index.dd0790b5.js";import{u as z}from"./useSearchParams.0c3b0efc.js";import{u as Q}from"./useSbRouteMatch.6006fa30.js";import{d as V,e as D}from"./Skeleton.8e936dc0.js";import{f as X,e as Y,d as ee}from"./game-data.db5bee93.js";import"./backend-status-codes.80bfe624.js";import"./i18next.083d61f0.js";import{L as te,b as oe,h as se,M as k}from"./sport-data.b40f7b49.js";import{s as M}from"./new-sportsbook.4549be32.js";import{h as re}from"./fav-data.1c5898b7.js";import{g as ie,e as ae}from"./new-sportsbook.b7bad95f.js";import{g as ne}from"./index.3cfeccf9.js";import{u as me}from"./useTranslation.70287e96.js";import{u}from"./index.ffa75b49.js";import{u as pe}from"./useDispatch.cd750ed9.js";const le=o=>{let e=0;return o.region&&Object.values(o.region).forEach(s=>{s.competition&&Object.values(s.competition).forEach(n=>{e+=Object.keys(n.game||{}).length})}),e},I=(o,e)=>{const s=Object.values(o).reduce((n,l)=>(n[l.alias]=le(l),n),{});return e&&(s[e]=Object.values(s).reduce((n,l)=>n+=l,0)),s},Fe=()=>{const o=u(ie),e=pe(),{t:s}=me(),{type:n}=z(),{path:l,params:r}=Q(),b=P(),S=u(V),h=u(te),m=u(re).sportsWithCompetitions,{orderSports:N,orderIsLoading:R}=w(),j=u(oe),G=u(ae),i=C(()=>{if(S)return N(JSON.parse(JSON.stringify(S)))},[G,S]),c=C(()=>i===void 0?i:i!=null&&i.length?B([{id:0,alias:"AllESports",name:s("sportsbook.allESports"),order:0},...Object.values(i)]).map(t=>({id:Number(t.id),alias:t.alias,name:t.name,gameCount:h[t.alias]})):null,[i,h]),L=t=>{const a=t.find(p=>p.alias===r.sport);o&&a&&o.alias===a.alias||(a?f({id:Number(a.id),alias:a.alias,name:a.name},!0):r.sport==="favourites"?f({id:-1,alias:"favourites",name:d.USER_PERSONALIZATION_ENABLED?s("generic.yourPreferences"):s("sportsbook.favorites"),gameCount:m!=null?m:0},!0):f({id:0,alias:"AllESports",name:s("sportsbook.allESports")},!0))},_=t=>{const a=I((t==null?void 0:t.sport)||{},"AllESports");e(k(v({},a))),Object.keys((t==null?void 0:t.sport)||{}).length?e(D(t.sport)):e(D(void 0))},f=U((t,a)=>{if(d.MOCKED_DATA){e(M(t));return}e(M(t)),e(se(void 0));let p=J(l.replace(/:sport\?.*$/,t.alias));O()||(p+="/all/all"),a&&(r.region&&(p=p.replace("/all",`/${r.region}`)),r.competition&&(p=p.replace("/all",`/${r.competition}`)),r.game&&(p+=`/${r.game}`)),b.push(`${p}${b.location.search}`)},[l,b.location.search,r]);g(()=>{if(o)return e(X({name:o.name})),()=>{e(Y(void 0)),e(ee(void 0))}},[o]),g(()=>{if(!Object.keys(h).length&&i){const t=I(i,"AllESports");e(k(v({},t)))}},[]),g(()=>{if((o==null?void 0:o.alias)!==r.sport){const t=c==null?void 0:c.find(a=>a.alias===r.sport);t&&e(M(t))}},[r==null?void 0:r.sport,o]),g(()=>{i&&L(Object.values(i))},[i]),g(()=>{if(!n&&!d.MOCKED_DATA)return;const t=K.gForSubscribe("esportSports");return ne(t,_,n,j),()=>{Z(t)}},[n,j]);const x=C(()=>O()?E.jsx(W,{count:m!=null?m:0,active:(o==null?void 0:o.alias)==="favourites",onClick:()=>{const t={id:-1,alias:"favourites",name:d.USER_PERSONALIZATION_ENABLED?s("generic.yourPreferences"):s("sportsbook.favorites"),gameCount:m!=null?m:0};f(t)}}):null,[m,o]);return c===void 0&&S===void 0?E.jsx("div",{className:`${O()?"esportEmptyMatch esportEmptyMatch__mobile":"esportEmptyMatch"}`,children:E.jsx(H,{isLive:!0})}):E.jsx(q,{FavMenuItem:x,layout:"underline",items:c||null,selectedItem:o,onSelectItem:f,orderIsLoading:R})};export{Fe as E};
